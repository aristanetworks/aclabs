---
name: eos-tips
prefix: ""

mgmt:
  network: custom_mgmt
  ipv4-subnet: 10.0.0.0/16

topology:
  kinds:
    arista_ceos:
      enforce-startup-config: true
      image: arista/ceos:latest
      env:
        CLAB_MGMT_VRF: MGMT
        INTFTYPE: et
    linux:
      image: ghcr.io/aristanetworks/aclabs/host-ubuntu:rev1.1

  nodes:
    SPINE1:
      kind: arista_ceos
      mgmt-ipv4: 10.0.1.1
      binds:
        - sn/SPINE1.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/clab-eos-tips/SPINE1/startup-config

    SPINE2:
      kind: arista_ceos
      mgmt-ipv4: 10.0.1.2
      binds:
        - sn/SPINE2.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/clab-eos-tips/SPINE2/startup-config

    LEAF1:
      kind: arista_ceos
      mgmt-ipv4: 10.0.2.1
      binds:
        - sn/LEAF1.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/clab-eos-tips/LEAF1/startup-config

    LEAF2:
      kind: arista_ceos
      mgmt-ipv4: 10.0.2.2
      binds:
        - sn/LEAF2.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/clab-eos-tips/LEAF2/startup-config

    Host1:
      kind: linux
      mgmt-ipv4: 10.0.3.1
      env:
        IPV4: 10.10.10.101/24
        STATIC_ROUTE: 10.0.0.0/8
        GW: 10.10.10.1
        IPV6: 2001:db8:10:10::101/64
        UPLINK_MAC: 00:01:01:01:01:01

    Host2:
      kind: linux
      mgmt-ipv4: 10.0.3.2
      env:
        IPV4: 10.20.20.101/24
        STATIC_ROUTE: 10.0.0.0/8
        GW: 10.20.20.1
        IPV6: 2001:db8:20:20::101/64
        UPLINK_MAC: 00:02:02:02:02:02
        TMODE: lacp
    Host3:
      kind: linux
      env:
        IPV4: 10.10.10.102/24
        IPV6: 2001:db8:10:10::102/64
        STATIC_ROUTE: 10.0.0.0/8
        GW: 10.10.10.1
        UPLINK_MAC: 00:03:03:03:03:03

  links:
    - endpoints: [ "LEAF1:et1", "SPINE1:et1" ]
    - endpoints: [ "LEAF1:et2", "SPINE2:et1" ]
    - endpoints: [ "SPINE1:et47", "SPINE2:et47" ]
    - endpoints: [ "SPINE1:et48", "SPINE2:et48" ]
    - endpoints: [ "Host1:eth1", "LEAF1:et11" ]
    - endpoints: [ "Host2:eth1", "LEAF1:et12" ]
    - endpoints: [ "Host2:eth2", "LEAF2:et12" ]
    - endpoints: [ "SPINE2:et2", "LEAF2:et1" ]
    - endpoints: [ "LEAF2:et2", "SPINE1:et2" ]
    - endpoints: [ "LEAF2:et11", "Host3:eth1" ]
    - endpoints: [ "LEAF1:et48", "LEAF2:et48" ]
    - endpoints: [ "LEAF1:et47", "LEAF2:et47" ]
