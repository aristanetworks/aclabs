! Command: show running-config
! device: EOS6 (cEOSLab, EOS-4.35.0F-43819090.eostrunkceos (engineering build))
!
no aaa root
!
username admin privilege 15 role network-admin secret sha512 $6$hULe.5hHBF7Q4Nyx$NthamffaWQkSWzf0LedpTIk60NLEi0dN/moBl5IVt74B14ci9sZVLgX2ll0B1HigEcorBgfSXWfYxMzktAFW81
!
management api http-commands
   no shutdown
   !
   vrf MGMT
      no shutdown
!
switchport default mode routed
!
no service interface inactive port-id allocation disabled
!
transceiver qsfp default-mode 4x10G
!
interface defaults
   mtu 9214
!
service routing protocols model multi-agent
!
hostname EOS6
!
spanning-tree mode mstp
!
system l1
   unsupported speed action error
   unsupported error-correction action error
!
vrf instance MGMT
!
management api gnmi
   transport grpc default
      vrf MGMT
!
management api netconf
   transport ssh default
      vrf MGMT
!
aaa authorization exec default local
!
interface Ethernet1
   no switchport
   ip address 20.1.6.6/24
!
interface Ethernet2
   no switchport
   ip address 20.2.6.6/24
!
interface Loopback0
   ip address 6.0.0.1/24
!
interface Loopback1
   ip address 6.1.1.1/24
!
interface Loopback2
   ip address 6.2.2.1/24
!
interface Loopback3
   ip address 6.3.3.1/24
!
interface Management0
   vrf MGMT
   ip address 172.100.100.106/24
!
ip routing
no ip routing vrf MGMT
!
ip route vrf MGMT 0.0.0.0/0 172.100.100.1
!
router bgp 600
   router-id 6.0.0.1
   distance bgp 20 200 200
   neighbor default send-community
   neighbor 20.1.6.1 remote-as 100
   neighbor 20.1.6.1 description EOS1
   neighbor 20.2.6.2 remote-as 200
   neighbor 20.2.6.2 description EOS2
   redistribute connected
   !
   address-family ipv4
      neighbor 20.1.6.1 rcf out AS100_OUT()
!
router general
   control-functions
      code
      function AS100_OUT() {
          if prefix covered_by 6.0.0.0/8 {
              community add { 100:105 };
          }
          return true;
      }
      EOF
!
router multicast
   ipv4
      software-forwarding kernel
   !
   ipv6
      software-forwarding kernel
!
end